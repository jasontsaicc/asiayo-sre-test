# 情境實戰測驗

## 【題目一】

試想臨時有一活動網頁專案將於近日推出，預期推廣期間訪客流量會是平日常態之百倍（或更
多）請簡易描述你/妳將如何確保服務能在推廣期間正常運作？考量的細節是什麼？

前一陣子的周杰倫演唱會搶票的案例我覺得是很好的例子，確保系統在高併發流量情況下運行，我以AWS環境來舉例

1. 第一步會先做流量的預估，找出過往有沒有類似案例的以及遭遇到的問題提前預防以及評估
2. 計算現有的資源以及可使用的資源 (CPU、memory、網路)
3. 前端架構可以使用Amazon CloudFron、S3來存取靜態內容，減少後端的負擔
4. 設置AWS的Auto Scaling、調整instance type
5. 設置Elastic Load Balancer做網路層和應用層的負載均衡
6. 資料庫使用DynamoDB可以自動擴展適合處理大量並發請求以及RDS Read Replica 
7. 使用Amazon SQS將請求寫入SQS佇列減少database的壓力
8. 多區域部署與異地備援
9. 提前模擬壓力測試，使用 CloudWatch 和 Grafana 監控系統資源

## 【題目二】

試想有一個API 伺服器集群，背後由多台機器組成，此時服務監控系統發現其中一台回應時
間經常逾時，僅有此機器異常，請簡易描述你/妳將會如何進行問題排查？考量的細節是什麼？

1. 先確認是在雲端還是在地端， 檢查系統log是否有異常訊息。
2. 進到server去排查CPU、storge、memory, 磁碟 I/O等，檢查資源是不是設置過低
3. 檢查網路狀況去ping其他台server 查看網路有沒有延遲，查看netstat
4.  檢查api的log有沒有異常，有沒有過多的請求或錯誤

## 【題目三】

試想有一項目運行於AWS EC2 機器之上，已確認該服務仍然正常運行中，但由於不明原因導致無法再次透過SSH 登入確認狀態（已確認排除並非網路異常，亦非防火牆阻擋所導致）。
請簡易描述你/妳將如何排查問題，並且讓服務恢復正常運作？考量的細節是什麼？如果可以，請試著回答造成無法登入的可能的肇因為何？

如果已經確認不是網路異常跟防火牆、安全群組阻擋的話，在AWS上的話第一直覺是登入console上使用**Instance Connect看看能不能連上，檢查ssh的key有沒有替換也可以重新生成**

**我之前有遇過類似的狀況是storge滿了，所以連ssh都沒辦法，最後是將EBS擴容才可以順利登入**

## 【題目四】

試想已有一組ELK/EFK 日誌服務集群，而今日有一新服務上線並且串接日誌紀錄，讓開發者
能夠透過Kibana 進行線上錯誤排查，你/妳會如何將日誌檔內容串接至ELK/EFK 系統？考
量的細節是什麼？

1. 在新服務端配置 **Filebeat**，並設置輸出至 Elasticsearch。
2. 設置熱區跟冷區的存儲以及過期刪除的規則
3. 配置 Kibana Dashboard方便視覺化查看log
4. 考量的細節是log保留策略跟log格式的一致性